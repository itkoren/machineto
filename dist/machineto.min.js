/*! machineto | 0.0.16 | 2014-11-25 | Copyright (c) 2014 Itai Koren, contributors */
!function(){function a(a,b,c){function d(){}function e(a){console&&console.log(a)}function f(a){return"object"==typeof a&&"function"==typeof a.log?a:!0!==a?{log:d}:{log:e}}function g(a){return n.log("[LOOKUP]: currentState = "+l+", eventName = "+a),m[l][a]}function h(a,b){n.log("[ACTION]: params = "+JSON.stringify(b));try{return a.action.apply(a.context,b),n.log("ACTION: SUCCESS"),!0}catch(c){n.log("ACTION: ERROR = "+JSON.stringify(c))}return!1}function i(a){n.log("[UPDATE]: nextState = "+a),l=a||l}function j(){return n.log("[GET {getCurrentState}]: currentState = "+l),l}function k(a){n.log("[FIRE {fire}]: eventName = "+a);var b,c=g(a),d=1<arguments.length?Array.prototype.slice.call(arguments,1):void 0;return c&&(b=c.async&&d&&"function"==typeof d[d.length-1]&&d[d.length-1],b&&(n.log("[FIRE {fire}]: async event action"),d[d.length-1]=function(){var a=1<arguments.length?Array.prototype.slice.call(arguments,1):void 0;i(c.nextState),b.apply(c.context,a)}),h(c,d))?(b||i(c.nextState),n.log("[FIRE {fire}]: FIRED"),!0):(n.log("[FIRE {fire}]: NOT FIRED"),!1)}c=c||{};var l,m,n=f(c.logger);return"string"==typeof a&&"object"==typeof b&&(n.log("[INITIALIZING]: Got needed initialization data"),l=a,n.log("[INITIALIZING]: currentState = "+l),m=b,n.log("[INITIALIZING]: transitionDiagram = "+JSON.stringify(m))),{getCurrentState:j,fire:k}}var b="undefined"!=typeof self?self:this;"undefined"!=typeof define&&define.amd?define([],function(){return a}):"undefined"!=typeof module&&module.exports?module.exports=a:b.Machineto=a}();